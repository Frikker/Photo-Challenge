<div id="vk-photos" class="modal fade">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <svg class="modal__cross" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" data-dismiss="modal">
          <path d="M23.954 21.03l-9.184-9.095 9.092-9.174-2.832-2.807-9.09 9.179-9.176-9.088-2.81 2.81 9.186 9.105-9.095 9.184 2.81 2.81 9.112-9.192 9.18 9.1z"/>
        </svg>
      </div>
      <div class="modal-body">
        <table>
          <% unless @photos.nil? %>
            <% @photos.each_with_index do |photo, i| %>
              <% if i%3 == 0 %>
                <tr>
              <% end %>
              <% photo_m_size = photo['sizes'].last %>
              <td class="photo-selector"><%= link_to image_tag(photo_m_size['url']), '#', data: {dismiss: 'modal'} %></td>
            <% end %>
          <% end %>
        </table>
      </div>
    </div>
  </div>
</div>

<script>
  $('.photo-selector').click(function (event) {
      event.preventDefault();
      $('#photo')[0].src = $('#photo_url')[0].value = this.children[0].children[0].src;
      $('.image')[0].value = null;
  })
</script>