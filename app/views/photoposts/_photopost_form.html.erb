<%= form_with(model: @photopost, authenticity_token: current_user.authenticity_token) do |f| %>
  <div class="field", style="margin-top: 1%">
    <%= f.text_area :content, placeholder: "Compose new micropost..." %>
  </div>
  <span>
    <%= f.file_field :picture, accept: "image/jpeg,image/gif,image/png", class: 'image' %>
    <%= link_to 'Upload from VK', '#', id: 'vk_photo'%>
  </span>
  <%= f.submit "Post", class: "btn btn-primary", style: 'margin-top: 1%' %>
<% end %>

<script type="text/javascript">
    $(".image").bind("change", function() {
        const size_in_megabytes = this.files[0].size/1024/1024;
        if (size_in_megabytes > 5) {
            alert("Maximum file size is 5MB. Please choose a smaller file.");
            $(".image").val("");
        }
    });
    $('#vk_photo').click(function () {
        let window = document.createElement('div');
        window.class = 'vk-photos';
        window.innerHTML = "<%= render 'photoposts/vk_photos' %>";
        $('#content').append(window);
    });
</script>